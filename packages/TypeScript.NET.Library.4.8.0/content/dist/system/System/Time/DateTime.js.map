{"version":3,"sources":["System/Time/DateTime.ts"],"names":[],"mappings":"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","file":"DateTime.js","sourcesContent":["/*!\r\n * @author electricessence / https://github.com/electricessence/\r\n * Based on .NET DateTime's interface.\r\n * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md\r\n */\r\nimport {ICalendarDate, ITimeStamp} from \"./ITimeStamp\";\r\nimport {TimeSpan} from \"./TimeSpan\";\r\nimport {ClockTime} from \"./ClockTime\";\r\nimport {Milliseconds} from \"./HowMany\";\r\nimport {TimeStamp} from \"./TimeStamp\";\r\nimport {IDateTime} from \"./IDateTime\";\r\nimport {Gregorian} from \"./Calendars\";\r\nimport {ITimeQuantity} from \"./ITimeQuantity\";\r\nimport {IEquatable} from \"../IEquatable\";\r\nimport {IComparable} from \"../IComparable\";\r\nimport {ArgumentNullException} from \"../Exceptions/ArgumentNullException\";\r\nimport Kind = DateTime.Kind;\r\n\r\nconst VOID0:undefined = void 0;\r\n\r\nexport class DateTime implements ICalendarDate, IDateTime, IEquatable<IDateTime>, IComparable<IDateTime>\r\n{\r\n\tprivate readonly _value:Date;\r\n\r\n\ttoJsDate():Date\r\n\t{\r\n\t\treturn new Date(this._value.getTime()); // return a clone.\r\n\t}\r\n\r\n\tconstructor();\r\n\tconstructor(dateString:string, kind?:DateTime.Kind);\r\n\tconstructor(milliseconds:number, kind?:DateTime.Kind);\r\n\tconstructor(source:Date, kind?:DateTime.Kind);\r\n\tconstructor(source:DateTime, kind?:DateTime.Kind);\r\n\tconstructor(value:any = new Date(), kind:DateTime.Kind = DateTime.Kind.Local)\r\n\t{\r\n\t\tthis._kind = kind;\r\n\t\tif(value instanceof DateTime)\r\n\t\t{\r\n\t\t\tthis._value = value.toJsDate();\r\n\t\t\tif(kind===VOID0) this._kind = value._kind;\r\n\t\t}\r\n\t\telse if(value instanceof Date)\r\n\t\t\tthis._value = new Date(value.getTime());\r\n\t\telse\r\n\t\t\tthis._value = value===VOID0\r\n\t\t\t\t? new Date()\r\n\t\t\t\t: new Date(value);\r\n\t}\r\n\r\n\tprivate readonly _kind:DateTime.Kind;\r\n\tget kind():DateTime.Kind\r\n\t{\r\n\t\treturn this._kind;\r\n\t}\r\n\r\n\tget year():number\r\n\t{\r\n\t\treturn this._value.getFullYear();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the Gregorian Month (zero indexed).\r\n\t * @returns {number}\r\n\t */\r\n\tget month():Gregorian.Month\r\n\t{\r\n\t\treturn this._value.getMonth();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the month number (1-12).\r\n\t * @returns {number}\r\n\t */\r\n\tget calendarMonth():number\r\n\t{\r\n\t\treturn this._value.getMonth() + 1;\r\n\t}\r\n\r\n\tget calendar():ICalendarDate\r\n\t{\r\n\t\treturn {\r\n\t\t\tyear: this.year,\r\n\t\t\tmonth: this.calendarMonth,\r\n\t\t\tday: this.day\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the day of the month.  An integer between 1 and 31.\r\n\t * @returns {number}\r\n\t */\r\n\tget day():number\r\n\t{\r\n\t\treturn this._value.getDate();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the day of the month indexed starting at zero.\r\n\t * @returns {number}\r\n\t */\r\n\tget dayIndex():number\r\n\t{\r\n\t\treturn this._value.getDate() - 1;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the zero indexed day of the week. (Sunday == 0)\r\n\t * @returns {number}\r\n\t */\r\n\tget dayOfWeek():Gregorian.DayOfWeek\r\n\t{\r\n\t\treturn this._value.getDay();\r\n\t}\r\n\r\n\r\n\taddMilliseconds(ms:number):DateTime\r\n\t{\r\n\t\tms = ms || 0;\r\n\t\treturn new DateTime(this._value.getTime() + ms, this._kind);\r\n\t}\r\n\r\n\taddSeconds(seconds:number):DateTime\r\n\t{\r\n\t\tseconds = seconds || 0;\r\n\t\treturn this.addMilliseconds(seconds*Milliseconds.Per.Second);\r\n\t}\r\n\r\n\taddMinutes(minutes:number):DateTime\r\n\t{\r\n\t\tminutes = minutes || 0;\r\n\t\treturn this.addMilliseconds(minutes*Milliseconds.Per.Minute);\r\n\t}\r\n\r\n\taddHours(hours:number):DateTime\r\n\t{\r\n\t\thours = hours || 0;\r\n\t\treturn this.addMilliseconds(hours*Milliseconds.Per.Hour);\r\n\t}\r\n\r\n\taddDays(days:number):DateTime\r\n\t{\r\n\t\tdays = days || 0;\r\n\t\treturn this.addMilliseconds(days*Milliseconds.Per.Day);\r\n\t}\r\n\r\n\taddMonths(months:number):DateTime\r\n\t{\r\n\t\tmonths = months || 0;\r\n\t\tconst d = this.toJsDate();\r\n\t\td.setMonth(d.getMonth() + months);\r\n\t\treturn new DateTime(d, this._kind);\r\n\t}\r\n\r\n\taddYears(years:number):DateTime\r\n\t{\r\n\t\tyears = years || 0;\r\n\t\tconst d = this.toJsDate();\r\n\t\td.setFullYear(d.getFullYear() + years);\r\n\t\treturn new DateTime(d, this._kind);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Receives an ITimeQuantity value and adds based on the total milliseconds.\r\n\t * @param {ITimeQuantity} time\r\n\t * @returns {DateTime}\r\n\t */\r\n\tadd(time:ITimeQuantity):DateTime\r\n\t{\r\n\t\treturn this.addMilliseconds(time.getTotalMilliseconds());\r\n\t}\r\n\r\n\t/**\r\n\t * Receives an ITimeQuantity value and subtracts based on the total milliseconds.\r\n\t * @param {ITimeQuantity} time\r\n\t * @returns {DateTime}\r\n\t */\r\n\tsubtract(time:ITimeQuantity):DateTime\r\n\t{\r\n\t\treturn this.addMilliseconds(-time.getTotalMilliseconds());\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a TimeSpan representing the amount of time between two dates.\r\n\t * @param previous\r\n\t * @returns {TimeSpan}\r\n\t */\r\n\ttimePassedSince(previous:Date|DateTime):TimeSpan\r\n\t{\r\n\t\treturn DateTime.between(previous, this);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a DateTime object for 00:00 of this date.\r\n\t */\r\n\tget date():DateTime\r\n\t{\r\n\t\tconst _ = this;\r\n\t\treturn new DateTime(\r\n\t\t\tnew Date(\r\n\t\t\t\t_.year,\r\n\t\t\t\t_.month,\r\n\t\t\t\t_.day\r\n\t\t\t)\r\n\t\t\t, _._kind\r\n\t\t);\r\n\t}\r\n\r\n\tprivate _time:ClockTime|null;\r\n\r\n\t/**\r\n\t * Returns the time of day represented by a ClockTime object.\r\n\t * @returns {ClockTime}\r\n\t */\r\n\tget timeOfDay():ClockTime\r\n\t{\r\n\t\tconst _ = this;\r\n\t\tlet t = _._time;\r\n\t\tif(!t)\r\n\t\t{\r\n\t\t\tconst d = this._value;\r\n\t\t\t_._time = t = new ClockTime(\r\n\t\t\t\td.getHours(),\r\n\t\t\t\td.getMinutes(),\r\n\t\t\t\td.getSeconds(),\r\n\t\t\t\td.getMilliseconds());\r\n\t\t}\r\n\t\treturn t;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a readonly object which contains all the date and time components.\r\n\t */\r\n\ttoTimeStamp():ITimeStamp\r\n\t{\r\n\t\treturn TimeStamp.from(this);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the now local time.\r\n\t * @returns {DateTime}\r\n\t */\r\n\tstatic get now():DateTime\r\n\t{\r\n\t\treturn new DateTime();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a UTC version of this date if its kind is local.\r\n\t * @returns {DateTime}\r\n\t */\r\n\tget toUniversalTime():DateTime\r\n\t{\r\n\t\tconst _ = this;\r\n\t\tif(_._kind!=DateTime.Kind.Local)\r\n\t\t\treturn new DateTime(_, _._kind);\r\n\r\n\t\tconst d = _._value;\r\n\t\treturn new DateTime(\r\n\t\t\tnew Date(\r\n\t\t\t\td.getUTCFullYear(),\r\n\t\t\t\td.getUTCMonth(),\r\n\t\t\t\td.getUTCDate(),\r\n\t\t\t\td.getUTCHours(),\r\n\t\t\t\td.getUTCMinutes(),\r\n\t\t\t\td.getUTCSeconds(),\r\n\t\t\t\td.getUTCMilliseconds()\r\n\t\t\t),\r\n\t\t\tDateTime.Kind.Utc\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Compares a JS Date with the current instance.  Does not evaluate the kind.\r\n\t * @param other\r\n\t * @returns {boolean}\r\n\t */\r\n\tequals(other:Date):boolean\r\n\r\n\t/**\r\n\t * Compares another IDateTime object and returns true if they or their value are equal.\r\n\t * @param other The other IDateTime object.\r\n\t * @param strict When strict is true, the 'kind' also must match.\r\n\t * @returns {boolean}\r\n\t */\r\n\tequals(other:IDateTime, strict?:boolean):boolean\r\n\r\n\tequals(other:IDateTime | Date, strict:boolean = false):boolean\r\n\t{\r\n\t\tif(!other) return false;\r\n\t\tif(other==this) return true;\r\n\r\n\t\tif(other instanceof Date)\r\n\t\t{\r\n\t\t\tlet v = this._value;\r\n\t\t\treturn other==v || other.getTime()==v.getTime();\r\n\t\t}\r\n\r\n\t\tif(other instanceof DateTime)\r\n\t\t{\r\n\t\t\tif(strict)\r\n\t\t\t{\r\n\t\t\t\tlet ok = other._kind;\r\n\t\t\t\tif(!ok && this._kind || ok!=this._kind) return false;\r\n\t\t\t}\r\n\r\n\t\t\treturn this.equals(other._value);\r\n\t\t}\r\n\t\telse if(strict)\r\n\t\t\treturn false;\r\n\r\n\t\treturn this.equals(other.toJsDate());\r\n\r\n\t}\r\n\r\n\t// https://msdn.microsoft.com/en-us/library/system.icomparable.compareto(v=vs.110).aspx\r\n\tcompareTo(other:IDateTime | Date):number\r\n\t{\r\n\t\tif(!other) throw new ArgumentNullException(\"other\");\r\n\t\tif(other==this) return 0;\r\n\r\n\t\tif(other instanceof DateTime)\r\n\t\t{\r\n\t\t\tother = other._value;\r\n\t\t}\r\n\r\n\t\tconst ms = this._value.getTime();\r\n\r\n\t\tif(other instanceof Date)\r\n\t\t{\r\n\t\t\treturn ms - other.getTime();\r\n\t\t}\r\n\r\n\t\treturn ms - other.toJsDate().getTime();\r\n\t}\r\n\r\n\tequivalent(other:IDateTime | Date):boolean\r\n\t{\r\n\t\tif(!other) return false;\r\n\t\tif(other==this) return true;\r\n\r\n\t\tif(other instanceof Date)\r\n\t\t{\r\n\t\t\tlet v = this._value;\r\n\t\t\t// TODO: What is the best way to handle this when kinds match or don't?\r\n\t\t\treturn v.toUTCString()==other.toUTCString();\r\n\t\t}\r\n\r\n\t\tif(other instanceof DateTime)\r\n\t\t{\r\n\t\t\tif(this.equals(other, true)) return true;\r\n\t\t}\r\n\r\n\t\treturn this.equivalent(other.toJsDate());\r\n\t}\r\n\r\n\t/**\r\n\t * The date component for now.\r\n\t * @returns {DateTime}\r\n\t */\r\n\tstatic get today():DateTime\r\n\t{\r\n\t\treturn DateTime.now.date;\r\n\t}\r\n\r\n\t/**\r\n\t * Midnight tomorrow.\r\n\t * @returns {DateTime}\r\n\t */\r\n\tstatic get tomorrow():DateTime\r\n\t{\r\n\t\tconst today:DateTime = DateTime.today;\r\n\t\treturn today.addDays(1);\r\n\t}\r\n\r\n\t/**\r\n\t * Measures the difference between two dates as a TimeSpan.\r\n\t * @param first\r\n\t * @param last\r\n\t */\r\n\tstatic between(first:Date|DateTime, last:Date|DateTime):TimeSpan\r\n\t{\r\n\t\tconst f:Date = first instanceof DateTime ? first._value : <Date>first,\r\n\t\t      l:Date = last instanceof DateTime ? last._value : <Date>last;\r\n\r\n\t\treturn new TimeSpan(l.getTime() - f.getTime());\r\n\t}\r\n\r\n\t/**\r\n\t * Calculates if the given year is a leap year using the formula:\r\n\t * ((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0)\r\n\t * @param year\r\n\t * @returns {boolean}\r\n\t */\r\n\tstatic isLeapYear(year:number):boolean\r\n\t{\r\n\t\treturn ((year%4==0) && (year%100!=0)) || (year%400==0);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the number of days for the specific year and month.\r\n\t * @param year\r\n\t * @param month\r\n\t * @returns {any}\r\n\t */\r\n\tstatic daysInMonth(year:number, month:Gregorian.Month):number\r\n\t{\r\n\t\t// Basically, add 1 month, subtract a day... What's the date?\r\n\t\treturn (new Date(year, month + 1, 0)).getDate();\r\n\t}\r\n\r\n\tstatic from(calendarDate:ICalendarDate):DateTime;\r\n\tstatic from(year:number, month:Gregorian.Month, day:number):DateTime;\r\n\tstatic from(\r\n\t\tyearOrDate:number|ICalendarDate,\r\n\t\tmonth:number = 0,\r\n\t\tday:number = 1):DateTime\r\n\t{\r\n\t\tlet year:number;\r\n\t\tif(typeof yearOrDate==\"object\")\r\n\t\t{\r\n\t\t\tday = (<ICalendarDate>yearOrDate).day;\r\n\t\t\tmonth = (<ICalendarDate>yearOrDate).month;\r\n\t\t\tyear = (<ICalendarDate>yearOrDate).year;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tyear = yearOrDate;\r\n\t\t}\r\n\r\n\t\treturn new DateTime(new Date(year, month, day));\r\n\r\n\t}\r\n\r\n\r\n\tstatic fromCalendarDate(calendarDate:ICalendarDate):DateTime;\r\n\tstatic fromCalendarDate(year:number, month:number, day:number):DateTime;\r\n\tstatic fromCalendarDate(\r\n\t\tyearOrDate:number|ICalendarDate,\r\n\t\tmonth:number = 1,\r\n\t\tday:number = 1):DateTime\r\n\t{\r\n\t\tlet year:number;\r\n\t\tif(typeof yearOrDate==\"object\")\r\n\t\t{\r\n\t\t\tday = (<ICalendarDate>yearOrDate).day;\r\n\t\t\tmonth = (<ICalendarDate>yearOrDate).month;\r\n\t\t\tyear = (<ICalendarDate>yearOrDate).year;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tyear = yearOrDate;\r\n\t\t}\r\n\r\n\t\treturn new DateTime(new Date(year, month - 1, day));\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Extend DateTime's usefulness.\r\nexport module DateTime\r\n{\r\n\texport const enum Kind {\r\n\t\tUnspecified,\r\n\t\tLocal,\r\n\t\tUtc,\r\n\t}\r\n}\r\n\r\nObject.freeze(DateTime);\r\n\r\nexport default DateTime;\r\n"]}