{"version":3,"sources":["System/Time/DateTime.ts"],"names":[],"mappings":"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","file":"DateTime.js","sourcesContent":["/*!\r\n * @author electricessence / https://github.com/electricessence/\r\n * Based on .NET DateTime's interface.\r\n * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md\r\n */\r\nimport {ICalendarDate, ITimeStamp} from \"./ITimeStamp\";\r\nimport {TimeSpan} from \"./TimeSpan\";\r\nimport {ClockTime} from \"./ClockTime\";\r\nimport {Milliseconds} from \"./HowMany\";\r\nimport {TimeStamp} from \"./TimeStamp\";\r\nimport {IDateTime} from \"./IDateTime\";\r\nimport {Gregorian} from \"./Calendars\";\r\nimport {ITimeQuantity} from \"./ITimeQuantity\";\r\nimport {IEquatable} from \"../IEquatable\";\r\nimport {IComparable} from \"../IComparable\";\r\nimport {ArgumentNullException} from \"../Exceptions/ArgumentNullException\";\r\nimport Kind = DateTime.Kind;\r\n\r\nconst VOID0:undefined = void 0;\r\n\r\nexport class DateTime implements ICalendarDate, IDateTime, IEquatable<IDateTime>, IComparable<IDateTime>\r\n{\r\n\tprivate readonly _value:Date;\r\n\r\n\ttoJsDate():Date\r\n\t{\r\n\t\treturn new Date(this._value.getTime()); // return a clone.\r\n\t}\r\n\r\n\tconstructor();\r\n\tconstructor(dateString:string, kind?:DateTime.Kind);\r\n\tconstructor(milliseconds:number, kind?:DateTime.Kind);\r\n\tconstructor(source:Date, kind?:DateTime.Kind);\r\n\tconstructor(source:DateTime, kind?:DateTime.Kind);\r\n\tconstructor(value:any = new Date(), kind:DateTime.Kind = DateTime.Kind.Local)\r\n\t{\r\n\t\tthis._kind = kind;\r\n\t\tif(value instanceof DateTime)\r\n\t\t{\r\n\t\t\tthis._value = value.toJsDate();\r\n\t\t\tif(kind===VOID0) this._kind = value._kind;\r\n\t\t}\r\n\t\telse if(value instanceof Date)\r\n\t\t\tthis._value = new Date(value.getTime());\r\n\t\telse\r\n\t\t\tthis._value = value===VOID0\r\n\t\t\t\t? new Date()\r\n\t\t\t\t: new Date(value);\r\n\t}\r\n\r\n\tprivate readonly _kind:DateTime.Kind;\r\n\tget kind():DateTime.Kind\r\n\t{\r\n\t\treturn this._kind;\r\n\t}\r\n\r\n\tget year():number\r\n\t{\r\n\t\treturn this._value.getFullYear();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the Gregorian Month (zero indexed).\r\n\t * @returns {number}\r\n\t */\r\n\tget month():Gregorian.Month\r\n\t{\r\n\t\treturn this._value.getMonth();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the month number (1-12).\r\n\t * @returns {number}\r\n\t */\r\n\tget calendarMonth():number\r\n\t{\r\n\t\treturn this._value.getMonth() + 1;\r\n\t}\r\n\r\n\tget calendar():ICalendarDate\r\n\t{\r\n\t\treturn {\r\n\t\t\tyear: this.year,\r\n\t\t\tmonth: this.calendarMonth,\r\n\t\t\tday: this.day\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the day of the month.  An integer between 1 and 31.\r\n\t * @returns {number}\r\n\t */\r\n\tget day():number\r\n\t{\r\n\t\treturn this._value.getDate();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the day of the month indexed starting at zero.\r\n\t * @returns {number}\r\n\t */\r\n\tget dayIndex():number\r\n\t{\r\n\t\treturn this._value.getDate() - 1;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the zero indexed day of the week. (Sunday == 0)\r\n\t * @returns {number}\r\n\t */\r\n\tget dayOfWeek():Gregorian.DayOfWeek\r\n\t{\r\n\t\treturn this._value.getDay();\r\n\t}\r\n\r\n\r\n\taddMilliseconds(ms:number):DateTime\r\n\t{\r\n\t\tms = ms || 0;\r\n\t\treturn new DateTime(this._value.getTime() + ms, this._kind);\r\n\t}\r\n\r\n\taddSeconds(seconds:number):DateTime\r\n\t{\r\n\t\tseconds = seconds || 0;\r\n\t\treturn this.addMilliseconds(seconds*Milliseconds.Per.Second);\r\n\t}\r\n\r\n\taddMinutes(minutes:number):DateTime\r\n\t{\r\n\t\tminutes = minutes || 0;\r\n\t\treturn this.addMilliseconds(minutes*Milliseconds.Per.Minute);\r\n\t}\r\n\r\n\taddHours(hours:number):DateTime\r\n\t{\r\n\t\thours = hours || 0;\r\n\t\treturn this.addMilliseconds(hours*Milliseconds.Per.Hour);\r\n\t}\r\n\r\n\taddDays(days:number):DateTime\r\n\t{\r\n\t\tdays = days || 0;\r\n\t\treturn this.addMilliseconds(days*Milliseconds.Per.Day);\r\n\t}\r\n\r\n\taddMonths(months:number):DateTime\r\n\t{\r\n\t\tmonths = months || 0;\r\n\t\tconst d = this.toJsDate();\r\n\t\td.setMonth(d.getMonth() + months);\r\n\t\treturn new DateTime(d, this._kind);\r\n\t}\r\n\r\n\taddYears(years:number):DateTime\r\n\t{\r\n\t\tyears = years || 0;\r\n\t\tconst d = this.toJsDate();\r\n\t\td.setFullYear(d.getFullYear() + years);\r\n\t\treturn new DateTime(d, this._kind);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Receives an ITimeQuantity value and adds based on the total milliseconds.\r\n\t * @param {ITimeQuantity} time\r\n\t * @returns {DateTime}\r\n\t */\r\n\tadd(time:ITimeQuantity):DateTime\r\n\t{\r\n\t\treturn this.addMilliseconds(time.getTotalMilliseconds());\r\n\t}\r\n\r\n\t/**\r\n\t * Receives an ITimeQuantity value and subtracts based on the total milliseconds.\r\n\t * @param {ITimeQuantity} time\r\n\t * @returns {DateTime}\r\n\t */\r\n\tsubtract(time:ITimeQuantity):DateTime\r\n\t{\r\n\t\treturn this.addMilliseconds(-time.getTotalMilliseconds());\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a TimeSpan representing the amount of time between two dates.\r\n\t * @param previous\r\n\t * @returns {TimeSpan}\r\n\t */\r\n\ttimePassedSince(previous:Date|DateTime):TimeSpan\r\n\t{\r\n\t\treturn DateTime.between(previous, this);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a DateTime object for 00:00 of this date.\r\n\t */\r\n\tget date():DateTime\r\n\t{\r\n\t\tconst _ = this;\r\n\t\treturn new DateTime(\r\n\t\t\tnew Date(\r\n\t\t\t\t_.year,\r\n\t\t\t\t_.month,\r\n\t\t\t\t_.day\r\n\t\t\t)\r\n\t\t\t, _._kind\r\n\t\t);\r\n\t}\r\n\r\n\tprivate _time:ClockTime|null;\r\n\r\n\t/**\r\n\t * Returns the time of day represented by a ClockTime object.\r\n\t * @returns {ClockTime}\r\n\t */\r\n\tget timeOfDay():ClockTime\r\n\t{\r\n\t\tconst _ = this;\r\n\t\tlet t = _._time;\r\n\t\tif(!t)\r\n\t\t{\r\n\t\t\tconst d = this._value;\r\n\t\t\t_._time = t = new ClockTime(\r\n\t\t\t\td.getHours(),\r\n\t\t\t\td.getMinutes(),\r\n\t\t\t\td.getSeconds(),\r\n\t\t\t\td.getMilliseconds());\r\n\t\t}\r\n\t\treturn t;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a readonly object which contains all the date and time components.\r\n\t */\r\n\ttoTimeStamp():ITimeStamp\r\n\t{\r\n\t\treturn TimeStamp.from(this);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the now local time.\r\n\t * @returns {DateTime}\r\n\t */\r\n\tstatic get now():DateTime\r\n\t{\r\n\t\treturn new DateTime();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a UTC version of this date if its kind is local.\r\n\t * @returns {DateTime}\r\n\t */\r\n\tget toUniversalTime():DateTime\r\n\t{\r\n\t\tconst _ = this;\r\n\t\tif(_._kind!=DateTime.Kind.Local)\r\n\t\t\treturn new DateTime(_, _._kind);\r\n\r\n\t\tconst d = _._value;\r\n\t\treturn new DateTime(\r\n\t\t\tnew Date(\r\n\t\t\t\td.getUTCFullYear(),\r\n\t\t\t\td.getUTCMonth(),\r\n\t\t\t\td.getUTCDate(),\r\n\t\t\t\td.getUTCHours(),\r\n\t\t\t\td.getUTCMinutes(),\r\n\t\t\t\td.getUTCSeconds(),\r\n\t\t\t\td.getUTCMilliseconds()\r\n\t\t\t),\r\n\t\t\tDateTime.Kind.Utc\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Compares a JS Date with the current instance.  Does not evaluate the kind.\r\n\t * @param other\r\n\t * @returns {boolean}\r\n\t */\r\n\tequals(other:Date):boolean\r\n\r\n\t/**\r\n\t * Compares another IDateTime object and returns true if they or their value are equal.\r\n\t * @param other The other IDateTime object.\r\n\t * @param strict When strict is true, the 'kind' also must match.\r\n\t * @returns {boolean}\r\n\t */\r\n\tequals(other:IDateTime, strict?:boolean):boolean\r\n\r\n\tequals(other:IDateTime | Date, strict:boolean = false):boolean\r\n\t{\r\n\t\tif(!other) return false;\r\n\t\tif(other==this) return true;\r\n\r\n\t\tif(other instanceof Date)\r\n\t\t{\r\n\t\t\tlet v = this._value;\r\n\t\t\treturn other==v || other.getTime()==v.getTime();\r\n\t\t}\r\n\r\n\t\tif(other instanceof DateTime)\r\n\t\t{\r\n\t\t\tif(strict)\r\n\t\t\t{\r\n\t\t\t\tlet ok = other._kind;\r\n\t\t\t\tif(!ok && this._kind || ok!=this._kind) return false;\r\n\t\t\t}\r\n\r\n\t\t\treturn this.equals(other._value);\r\n\t\t}\r\n\t\telse if(strict)\r\n\t\t\treturn false;\r\n\r\n\t\treturn this.equals(other.toJsDate());\r\n\r\n\t}\r\n\r\n\t// https://msdn.microsoft.com/en-us/library/system.icomparable.compareto(v=vs.110).aspx\r\n\tcompareTo(other:IDateTime | Date):number\r\n\t{\r\n\t\tif(!other) throw new ArgumentNullException(\"other\");\r\n\t\tif(other==this) return 0;\r\n\r\n\t\tif(other instanceof DateTime)\r\n\t\t{\r\n\t\t\tother = other._value;\r\n\t\t}\r\n\r\n\t\tconst ms = this._value.getTime();\r\n\r\n\t\tif(other instanceof Date)\r\n\t\t{\r\n\t\t\treturn ms - other.getTime();\r\n\t\t}\r\n\r\n\t\treturn ms - other.toJsDate().getTime();\r\n\t}\r\n\r\n\tequivalent(other:IDateTime | Date):boolean\r\n\t{\r\n\t\tif(!other) return false;\r\n\t\tif(other==this) return true;\r\n\r\n\t\tif(other instanceof Date)\r\n\t\t{\r\n\t\t\tlet v = this._value;\r\n\t\t\t// TODO: What is the best way to handle this when kinds match or don't?\r\n\t\t\treturn v.toUTCString()==other.toUTCString();\r\n\t\t}\r\n\r\n\t\tif(other instanceof DateTime)\r\n\t\t{\r\n\t\t\tif(this.equals(other, true)) return true;\r\n\t\t}\r\n\r\n\t\treturn this.equivalent(other.toJsDate());\r\n\t}\r\n\r\n\t/**\r\n\t * The date component for now.\r\n\t * @returns {DateTime}\r\n\t */\r\n\tstatic get today():DateTime\r\n\t{\r\n\t\treturn DateTime.now.date;\r\n\t}\r\n\r\n\t/**\r\n\t * Midnight tomorrow.\r\n\t * @returns {DateTime}\r\n\t */\r\n\tstatic get tomorrow():DateTime\r\n\t{\r\n\t\tconst today:DateTime = DateTime.today;\r\n\t\treturn today.addDays(1);\r\n\t}\r\n\r\n\t/**\r\n\t * Measures the difference between two dates as a TimeSpan.\r\n\t * @param first\r\n\t * @param last\r\n\t */\r\n\tstatic between(first:Date|DateTime, last:Date|DateTime):TimeSpan\r\n\t{\r\n\t\tconst f:Date = first instanceof DateTime ? first._value : <Date>first,\r\n\t\t      l:Date = last instanceof DateTime ? last._value : <Date>last;\r\n\r\n\t\treturn new TimeSpan(l.getTime() - f.getTime());\r\n\t}\r\n\r\n\t/**\r\n\t * Calculates if the given year is a leap year using the formula:\r\n\t * ((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0)\r\n\t * @param year\r\n\t * @returns {boolean}\r\n\t */\r\n\tstatic isLeapYear(year:number):boolean\r\n\t{\r\n\t\treturn ((year%4==0) && (year%100!=0)) || (year%400==0);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the number of days for the specific year and month.\r\n\t * @param year\r\n\t * @param month\r\n\t * @returns {any}\r\n\t */\r\n\tstatic daysInMonth(year:number, month:Gregorian.Month):number\r\n\t{\r\n\t\t// Basically, add 1 month, subtract a day... What's the date?\r\n\t\treturn (new Date(year, month + 1, 0)).getDate();\r\n\t}\r\n\r\n\tstatic from(calendarDate:ICalendarDate):DateTime;\r\n\tstatic from(year:number, month:Gregorian.Month, day:number):DateTime;\r\n\tstatic from(\r\n\t\tyearOrDate:number|ICalendarDate,\r\n\t\tmonth:number = 0,\r\n\t\tday:number = 1):DateTime\r\n\t{\r\n\t\tlet year:number;\r\n\t\tif(typeof yearOrDate==\"object\")\r\n\t\t{\r\n\t\t\tday = (<ICalendarDate>yearOrDate).day;\r\n\t\t\tmonth = (<ICalendarDate>yearOrDate).month;\r\n\t\t\tyear = (<ICalendarDate>yearOrDate).year;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tyear = yearOrDate;\r\n\t\t}\r\n\r\n\t\treturn new DateTime(new Date(year, month, day));\r\n\r\n\t}\r\n\r\n\r\n\tstatic fromCalendarDate(calendarDate:ICalendarDate):DateTime;\r\n\tstatic fromCalendarDate(year:number, month:number, day:number):DateTime;\r\n\tstatic fromCalendarDate(\r\n\t\tyearOrDate:number|ICalendarDate,\r\n\t\tmonth:number = 1,\r\n\t\tday:number = 1):DateTime\r\n\t{\r\n\t\tlet year:number;\r\n\t\tif(typeof yearOrDate==\"object\")\r\n\t\t{\r\n\t\t\tday = (<ICalendarDate>yearOrDate).day;\r\n\t\t\tmonth = (<ICalendarDate>yearOrDate).month;\r\n\t\t\tyear = (<ICalendarDate>yearOrDate).year;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tyear = yearOrDate;\r\n\t\t}\r\n\r\n\t\treturn new DateTime(new Date(year, month - 1, day));\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Extend DateTime's usefulness.\r\nexport module DateTime\r\n{\r\n\texport const enum Kind {\r\n\t\tUnspecified,\r\n\t\tLocal,\r\n\t\tUtc,\r\n\t}\r\n}\r\n\r\nObject.freeze(DateTime);\r\n\r\nexport default DateTime;\r\n"]}